УСТАНОВКА
===================================
Linux:
- установить пакет ROOT, используя CERN-овские инструкции  http://root.cern.ch
- создать каталог для модуля анализа "mkdir hv_ana" <Enter>
- скопировать архив hv_ana.zip в созданный каталог
- разархивировать hv_ana.zip "unzip hv_ana.zip" <Enter>
- перекомпилировать модуль анализа "make" <Enter> (после успешной компиляции в каталоге появится исполняемый файл HVtest)


MS Windows:
- установить пакет ROOT, используя CERN-овские инструкции  http://root.cern.ch
- создать каталог для модуля анализа 
- скопировать архив hv_ana.zip в созданный каталог
- разархивировать hv_ana.zip


ЗАПУСК
===================================
Linux:
- перейти в каталог модуля анализа "cd hv_ana" <Enter>
- запуск из командной строки "HVtest путь_к_файлу_данных  кол-во_точек_для_анализа  кол-во_каналов_в_модуле" <Enter>
	Примеры запуска:
		 "HVtest /home/hvuser/data/imon_n0_a14_id008.log"  - анализировать все точки значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)
		 "HVtest /home/hvuser/data/imon_n0_a14_id008.log  200000 36"  - анализировать 200000 точек значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)  
		 "HVtest /home/hvuser/data/imon_n1_a15_id002.log -1 8"  - анализировать все точки значений токов из файла imon_n1_a15_id002.log (8-ми канальный Мастер модуль с ID#2 по адресу 15)  
 - запуск из оболочки ROOT-а
	- запустить ROOT "root" <Enter>
	- загрузить модуль анализа ".L hv_ana.C" <Enter>
	- запустить анализ "hv_ana(файл_данных, кол-во_точек, кол-во_каналов)" <Enter>
		Примеры запуска:   			
		hv_ana("/home/hvuser/data/imon_n0_a14_id008.log", -1, 36)  - анализировать все точки значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)
		hv_ana("/home/hvuser/data/imon_n0_a14_id008.log" , 200000, 36)  - анализировать 200000 точек значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)  
		hv_ana("/home/hvuser/data/imon_n1_a15_id002.log", -1, 8)  - анализировать все точки значений токов из файла imon_n1_a15_id002.log (8-ми канальный Мастер модуль с ID#2 по адресу 15)

Windows:
(Работа с модулем анализа под Windows возможна только в режиме запуска из оболочки ROOT-a)
- перейти в каталог модуля анализа "cd hv_ana" <Enter>
- запуск из оболочки ROOT-а
	- запустить ROOT "root" <Enter>
	- загрузить модуль анализа ".L hv_ana.C" <Enter>
	- запустить модуль анализа "hv_ana(файл_данных, кол-во_точек, кол-во_каналов)" <Enter>
		Примеры запуска:   			
		hv_ana("imon_n0_a14_id008.log", -1, 36)  - анализировать все точки значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)
		hv_ana("imon_n0_a14_id008.log" , 200000, 36)  - анализировать 200000 точек значений токов из файла imon_n0_a14_id008.log (36-ти канальный модуль с ID#8 по адресу 14)  
		hv_ana("imon_n1_a15_id002.log", -1, 8)  - анализировать все точки значений токов из файла imon_n1_a15_id002.log (8-ми канальный Мастер модуль с ID#2 по адресу 15)

Прервать анализ можно иcпользуя "Ctrl-C" 

РЕЗУЛЬТАТЫ
===================================
В процессе обработки файла данных будет отображаться обновляющаяся 2-х мерная гистограмма 
с распределением считанных значений ADC по каналам модуля.  
После завершения обработки в текущем каталоге будут созданы 4 файла с результатами анализа 

+ Файл с расширением .gif содержит картинку общей 2-х мерной гистограммы

+ Файл с расширением .res содержит текстовые результаты анализа 
------
Ch#   MIN    MAX   MEAN   DELTA          RMS
01   2361   2383   2378      22         1.03
02   2401   2431   2426      30        0.918
03   2409   2428   2423      19        0.936
04   2367   2381   2376      14         1.08
05   2405   2425   2420      20        0.962
06   2446   2464   2456      18         1.03
07   2443   2459   2454      16        0.975
08   2369   2383   2377      14         1.17
09   2560   3060   2573     500 (!)     1.32
10   2495   3104   2516     609 (!)     2.38 (!)
11   2548   3063   2564     515 (!)     1.38
12   2537   3037   2545     500 (!)     1.34
13   2479   3045   2568     566 (!)     6.91 (!)
14   2547   2883   2556     336 (!)      1.3
15   2601   2865   2608     264 (!)     1.16
16   2619   2884   2623     265 (!)     1.22
17   2448   2515   2510      67 (!)     1.06
18   2368   2494   2487     126 (!)     1.42
19   2373   2389   2384      16         1.05
20   2421   2439   2433      18         1.01
21   2427   2461   2442      34         2.11 (!)
22   2376   2423   2418      47        0.986
23   2398   2481   2415      83 (!)     0.95
24   2411   2860   2422     449 (!)     1.18
25   2425   3281   2461     856 (!)     3.46 (!)
26   2443   3107   2454     664 (!)     1.37
27   2545   2733   2555     188 (!)     1.06
28   2537   2688   2544     151 (!)     1.03
29   2426   2698   2528     272 (!)     4.99 (!)
30   2546   2580   2554      34         1.04
31   2539   2580   2574      41         1.15
32   2553   2592   2586      39         1.04
33   2475   2569   2563      94 (!)     1.06
34   2493   2608   2595     115 (!)      1.1
35   2403   2499   2494      96 (!)    0.968
36   2402   2521   2515     119 (!)     1.07

MIN:
#0:103936=2361 #1:103936=2401 #2:103936=2409 #3:103936=2367 #4:103936=2405 #5:103936=2446 #6:103936=2443 #7:103936=2369 #8:33835=2560 #9:315382=2495 #10:103936=2548 #11:103936=2537 #12:153732=2479 #13:122325=2547 #14:103936=2601 #15:94927=2619 #16:148556=2448 #17:148556=2368 #18:103936=2373 #19:103936=2421 #20:117537=2427 #21:103936=2376 #22:103936=2398 #23:103936=2411 #24:180005=2425 #25:103936=2443 #26:103936=2545 #27:103936=2537 #28:171544=2426 #29:103936=2546 #30:148556=2539 #31:148556=2553 #32:148556=2475 #33:148556=2493 #34:148556=2403 #35:148556=2402 
MAX:
#0:8=2383 #1:417=2431 #2:882=2428 #3:25=2381 #4:76=2425 #5:194358=2464 #6:104=2459 #7:61=2383 #8:148556=3060 #9:148556=3104 #10:148556=3063 #11:148556=3037 #12:148556=3045 #13:148556=2883 #14:148556=2865 #15:148556=2884 #16:286=2515 #17:1354=2494 #18:26=2389 #19:18=2439 #20:106128=2461 #21:29=2423 #22:148556=2481 #23:148556=2860 #24:148556=3281 #25:148556=3107 #26:148556=2733 #27:148556=2688 #28:210097=2698 #29:148556=2580 #30:44=2580 #31:126=2592 #32:4143=2569 #33:83116=2608 #34:51=2499 #35:395=2521 
found 409796 points
-----
Строки со знаком (!) обозначают каналы для которых разница между максимальным и минимальным прочитанным значением ADC для канала больше 50 отсчетов и значение RMS>1.5

+ Файл с расширением  .root содерcжит гистограммы в формате ROOT-a  с распределениями значений ADC по отдельным каналам и общую 2-х мерную гистограмму
(для  просмотра использовать оболочку ROOT)

+ Файл с расширением .html содержит сгенерированную Web страницу с вышеперечисленными результатами


СЦЕНАРИЙ РАБОТЫ
=============================
(Как пример рассматривается DB-36 модуль с ID10 по адресу 7)
- Выключить режим записи данных в файл для модуля ("hvClient -n0 -a7 -w0")
- Стереть текущие файлы* данных для модуля, если необходимы только новые данные ("rm imon_n0_a7_id010.log vmon_n0_a7_id010.log")
- Сконфигурировать модуль (установить пороги, напряжения) ("hvClient -n0 -a7 -t1 -v3600 -u50 -s1")
- Дождаться установления напряжения (проверяется по запущенному монитору "hvClient -n0 -a7 -p")
- Включить режим записи в файл ("hvClient -n0 -a7 -w1")
- Выключить режим записи по окончании времени, необходимого для набора статистики
- Проанализировать файл с данными, согласно вышеописанной инструкции ("HVtest  imon_n0_a7_id010.log")


* Файлы данных создаются в том же каталоге из которого был запущен HV DIM сервер (hvServer). Обычно это или домашний каталог пользователя hvuser (/home/hvuser) 
или поддиректория в домашнем каталоге этого пользователя (/home/hvuser/data). 

Посмотреть список файлов в текущем каталоге можно с помощью команды "ls -l" или "ll".
Копировать файлы можно с помощью команды "cp" ("cp imon_n0_a7_id010.log imon_n0_a7_id010.log.3600")
Перемещать файлы можно с помощью команды "mv" ("mv imon_n0_a7_id010.log imon_n0_a7_id010.log.3600")
Удалять файлы можно с помощью команды "rm" ("rm imon_n0_a7_id010.log")
Просматривать постранично можно с помощью команды "less" ("less imon_n0_a7_id010.log")


При долговременном отключении модуля от питания желательно, предварительно сбрасывать его "hvClient -n0 -a7 -b0 -z" в тип NONE, а 
после включения восстанавливать его тип "hvClient -n0 -a7 -b3 -z". Эти действия помогут предотвратить множество ненужных сообщений в системном log файле /var/log/messages об изменении статуса Interlock-a,
на несуществующем-выключенном модуле





