<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:cc="http://java.sun.com/jsf/composite">

    <cc:interface>
        <cc:attribute name="uid" required="true" type="java.lang.String" shortDescription="Poll unique identifier"/>
        <cc:attribute name="interval" required="true" type="java.lang.Integer" shortDescription="Interval in seconds"/>
        <cc:attribute name="actionListener" required="true" method-signature="void listener(javax.faces.event.ActionEvent)" shortDescription="Action listener to call"/>
    </cc:interface>

    <cc:implementation>

        <ice:panelGrid visible="false">
            <ice:commandButton styleClass="#{cc.attrs.uid}poll" actionListener="#{cc.attrs.actionListener}"/>
            <script type="text/javascript">
                // <![CDATA[
                jQuery(document).ready( function () {
                    guiPollingStart(".#{cc.attrs.uid}poll", #{cc.attrs.interval});
                });
                // ]]>
            </script>
        </ice:panelGrid>

    </cc:implementation>
</html>