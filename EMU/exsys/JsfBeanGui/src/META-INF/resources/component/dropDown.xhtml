<?xml version='1.0' encoding='UTF-8' ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ice="http://www.icesoft.com/icefaces/component"
      xmlns:cc="http://java.sun.com/jsf/composite">

    <cc:interface>

        <cc:attribute name="value" default="dropDown"
                      shortDescription="Element caption"/>

        <cc:attribute name="type" default="button"
                      shortDescription="Component type: button or link"/>

        <cc:attribute name="title" default=""
                      shortDescription="title"/>

        <cc:attribute name="style" default=" "
                      shortDescription="Button/link style"/>

        <cc:attribute name="styleClass" default=" "
                      shortDescription="Style class"/>

        <cc:attribute name="popupStyleClass" default=" "
                      shortDescription="Popup style class"/>

        <cc:attribute name="popupStyle" default=" border-left: black outset 2px;  border-right: black outset 2px;  border-bottom: black outset 2px; background-color: #eeeeee"
                      shortDescription="Popup style"/>

        <cc:attribute name="disable" type="java.lang.Boolean" default="false"
                      shortDescription="Disabled element"/>

        <cc:attribute name="render" type="java.lang.Boolean" default="true"
                      shortDescription="Render element"/>

    </cc:interface>

    <cc:implementation>

        <ice:panelGroup style="margin: 0; padding: 0"
                        rendered="#{cc.attrs.render}">

            <h:commandLink id="link"
                           rendered="#{cc.attrs.type == 'link'}"
                           value="#{cc.attrs.value}"
                           title="#{cc.attrs.title}"
                           styleClass="iceCmdLnk #{cc.attrs.styleClass}"
                           style="#{cc.attrs.style}"
                           disabled="#{cc.attrs.disable}"/>

            <h:commandButton id="button"
                             rendered="#{cc.attrs.type == 'button'}"
                             value="#{cc.attrs.value}"
                             title="#{cc.attrs.title}"
                             styleClass="iceCmdBtn #{cc.attrs.styleClass}"
                             disabled="#{cc.attrs.disable}"
                             style="#{cc.attrs.style}"/>

            <div id="#{componentSupportBean.clientId}:popup"
                 style="display: none; #{cc.attrs.popupStyle};"
                 class="#{cc.attrs.popupStyleClass}">

                <cc:insertChildren/>

                <script type="text/javascript">
                    // <![CDATA[

                    jQuery(document).ready(function () {
                        var p = jQuery(jqPrefix('#{componentSupportBean.jqPrefix}') + 'popup');
                        var c = jQuery(jqPrefix('#{componentSupportBean.jqPrefix}') + 'button, ' + jqPrefix('#{componentSupportBean.jqPrefix}') + 'link');
                        c.dropDown(p);
                    });
                    //]]>
                </script>
            </div>
        </ice:panelGroup>

    </cc:implementation>
</html>
